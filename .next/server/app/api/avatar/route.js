"use strict";(()=>{var e={};e.id=705,e.ids=[705],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3454:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>f,routeModule:()=>v,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var a={};t.r(a),t.d(a,{GET:()=>l,POST:()=>c,PUT:()=>d});var s=t(49303),n=t(88716),o=t(60670),i=t(87070),u=t(43949),p=t(96094);async function c(e){try{let{userId:r,avatarConfig:t}=await e.json();if(!r||!t)return i.NextResponse.json({error:"User ID and avatar config are required"},{status:400});let a=await u._.user.update({where:{id:r},data:{avatarConfig:t}});return i.NextResponse.json({success:!0,avatarConfig:a.avatarConfig})}catch(e){return console.error("Error updating avatar:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function l(e){try{let{searchParams:r}=new URL(e.url),t=r.get("userId");if(!t)return i.NextResponse.json({error:"User ID is required"},{status:400});let a=await u._.user.findUnique({where:{id:t},include:{avatarItems:!0}});if(!a)return i.NextResponse.json({error:"User not found"},{status:404});let s=(0,p.Rl)(a.xp),n=a.avatarItems.map(e=>e.itemName),o=s.filter(e=>!n.includes(e));return i.NextResponse.json({avatarConfig:a.avatarConfig,avatarItems:a.avatarItems,availableUnlocks:o,level:(0,p.IN)(a.xp),xp:a.xp})}catch(e){return console.error("Error fetching avatar data:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let{userId:r,itemId:t,itemType:a,itemName:s,itemImage:n}=await e.json();if(!r||!t||!a||!s)return i.NextResponse.json({error:"Missing required fields"},{status:400});let o=await u._.avatarItem.upsert({where:{id:t},update:{itemName:s,itemImage:n,isUnlocked:!0,unlockedAt:new Date},create:{userId:r,itemId:t,itemType:a,itemName:s,itemImage:n,isUnlocked:!0,unlockedAt:new Date}});return i.NextResponse.json({success:!0,avatarItem:o})}catch(e){return console.error("Error updating avatar item:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let v=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/avatar/route",pathname:"/api/avatar",filename:"route",bundlePath:"app/api/avatar/route"},resolvedPagePath:"/Users/ronak/Downloads/fitzy_01/Fitzty/src/app/api/avatar/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:g}=v,m="/api/avatar/route";function x(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},96094:(e,r,t)=>{function a(e){return({post:20,upvote:5,streak:10,challenge:50,comment:3})[e]}function s(e){return Math.floor(e/100)+1}function n(e){let r=[];return e>=500&&r.push("Hairstyle: Wave Cut"),e>=1e3&&r.push("Background: Rooftop NYC"),e>=1500&&r.push("Clothing: Designer Jacket"),e>=2e3&&r.push("Accessory: Gold Chain"),e>=3e3&&r.push("Pose: Dancing"),r}t.d(r,{IN:()=>s,Rl:()=>n,b4:()=>a})},43949:(e,r,t)=>{t.d(r,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,972],()=>t(3454));module.exports=a})();