"use strict";(()=>{var e={};e.id=993,e.ids=[993],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47278:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>R,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{DELETE:()=>g,GET:()=>p,POST:()=>l,PUT:()=>d});var o=t(49303),n=t(88716),a=t(60670),i=t(87070),u=t(43949),c=t(96094);async function l(e){try{let{userId:r,name:t,description:s,image:o,category:n,brand:a,color:l,price:p,tags:d}=await e.json();if(!r||!t||!o||!n)return i.NextResponse.json({error:"Missing required fields"},{status:400});let g=await u._.closetItem.create({data:{userId:r,name:t,description:s,image:o,category:n,brand:a,color:l,price:p?parseFloat(p):null,tags:d||[]}});return await u._.user.update({where:{id:r},data:{xp:{increment:(0,c.b4)("post")}}}),i.NextResponse.json({success:!0,closetItem:g})}catch(e){return console.error("Error adding closet item:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function p(e){try{let{searchParams:r}=new URL(e.url),t=r.get("userId"),s=r.get("category");if(!t)return i.NextResponse.json({error:"User ID is required"},{status:400});let o={userId:t};s&&(o.category=s);let n=await u._.closetItem.findMany({where:o,orderBy:{createdAt:"desc"}}),a=n.reduce((e,r)=>(e[r.category]||(e[r.category]=[]),e[r.category].push(r),e),{});return i.NextResponse.json({items:n,groupedItems:a,totalItems:n.length})}catch(e){return console.error("Error fetching closet items:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let{id:r,name:t,description:s,category:o,brand:n,color:a,price:c,tags:l,isPublic:p}=await e.json();if(!r)return i.NextResponse.json({error:"Item ID is required"},{status:400});let d=await u._.closetItem.update({where:{id:r},data:{name:t,description:s,category:o,brand:n,color:a,price:c?parseFloat(c):null,tags:l||[],isPublic:p}});return i.NextResponse.json({success:!0,closetItem:d})}catch(e){return console.error("Error updating closet item:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function g(e){try{let{searchParams:r}=new URL(e.url),t=r.get("id");if(!t)return i.NextResponse.json({error:"Item ID is required"},{status:400});return await u._.closetItem.delete({where:{id:t}}),i.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting closet item:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/closet/route",pathname:"/api/closet",filename:"route",bundlePath:"app/api/closet/route"},resolvedPagePath:"/Users/ronak/Downloads/fitzy_01/Fitzty/src/app/api/closet/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:f}=m,y="/api/closet/route";function R(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},96094:(e,r,t)=>{function s(e){return({post:20,upvote:5,streak:10,challenge:50,comment:3})[e]}function o(e){return Math.floor(e/100)+1}function n(e){let r=[];return e>=500&&r.push("Hairstyle: Wave Cut"),e>=1e3&&r.push("Background: Rooftop NYC"),e>=1500&&r.push("Clothing: Designer Jacket"),e>=2e3&&r.push("Accessory: Gold Chain"),e>=3e3&&r.push("Pose: Dancing"),r}t.d(r,{IN:()=>o,Rl:()=>n,b4:()=>s})},43949:(e,r,t)=>{t.d(r,{_:()=>o});let s=require("@prisma/client"),o=globalThis.prisma??new s.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972],()=>t(47278));module.exports=s})();